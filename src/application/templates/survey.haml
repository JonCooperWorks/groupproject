-extends "base.html" 

-block content
  #survey: %section
    .progress.progress-striped.active
      .bar(style="width: 0%")
    %div
      %form(action="", method="POST")
        -for question in questions
          -if question.question_type == 'closed'
            .row
              .formgroup.span10
                %label.control-label(for="{{question.key}}")
                  {{question.question}}
                %label.radio.inline 
                  %input(type="radio", name="{{question.key}}", value="1") 
                  1
                %label.radio.inline 
                  %input(type="radio", name="{{question.key}}", value="2") 
                  2
                %label.radio.inline 
                  %input(type="radio", name="{{question.key}}", value="3") 
                  3
                %label.radio.inline 
                  %input(type="radio", name="{{question.key}}", value="4") 
                  4
                %label.radio.inline 
                  %input(type="radio", name="{{question.key}}", value="5")
                  5  
                

          -if question.question_type == 'open'
            .row
              .formgroup.span10
                %label.control-label(for="{{question.key}}")
                  {{question.question}}
                %input.form-control(type="text", class="form-control", id="{{question.key}}")

        .row          
          .form-group.span10
            %button(type="submit", class="btn btn-default") Submit

  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script>
    $(":radio").change(function() {

      var names = {};
      $(':radio').each(function() {
          names[$(this).attr('name')] = true;
      });

      var count = 0;
      $.each(names, function() { 
          count++;
      });

      length = $(':radio:checked').length;
      $(".bar").css('width', length/count*100 + '%');

    }).change();


  </script>
